import random
from datetime import datetime, timedelta
from utils.database import save_mealplan

BREAKFASTS = [
    "–û–≤—Å—è–Ω–∫–∞ —Å –±–∞–Ω–∞–Ω–æ–º –∏ –æ—Ä–µ—Ö–∞–º–∏",
    "–û–º–ª–µ—Ç —Å –∑–µ–ª–µ–Ω—å—é –∏ —Ö–ª–µ–±–æ–º",
    "–ô–æ–≥—É—Ä—Ç —Å –º—é—Å–ª–∏ –∏ —è–≥–æ–¥–∞–º–∏",
    "–¢–æ—Å—Ç—ã —Å –∞–≤–æ–∫–∞–¥–æ –∏ —è–π—Ü–æ–º",
    "–¢–≤–æ—Ä–æ–≥ —Å –º—ë–¥–æ–º –∏ –æ—Ä–µ—Ö–∞–º–∏"
]

LUNCHES = [
    "–ì—Ä–µ—á–∫–∞ —Å –∫—É—Ä–∏–Ω–æ–π –≥—Ä—É–¥–∫–æ–π –∏ —Å–∞–ª–∞—Ç–æ–º",
    "–†–∏—Å —Å –æ–≤–æ—â–∞–º–∏ –∏ –∏–Ω–¥–µ–π–∫–æ–π",
    "–ü–ª–æ–≤ —Å —Ç–µ–ª—è—Ç–∏–Ω–æ–π –∏ –æ–≤–æ—â–∞–º–∏",
    "–°—É–ø —Å —á–µ—á–µ–≤–∏—Ü–µ–π –∏ —Ö–ª–µ–±–µ—Ü",
    "–ú–∞–∫–∞—Ä–æ–Ω—ã —Å —Ç—É–Ω—Ü–æ–º –∏ –∑–µ–ª–µ–Ω—å—é"
]

DINNERS = [
    "–¢–≤–æ—Ä–æ–≥ —Å —è–≥–æ–¥–∞–º–∏ –∏ –º—ë–¥–æ–º",
    "–û–≤–æ—â–Ω–æ–µ —Ä–∞–≥—É —Å –∫—É—Ä–∏—Ü–µ–π",
    "–°–∞–ª–∞—Ç —Å —è–π—Ü–æ–º –∏ –≥—Ä–µ—Ü–∫–∏–º–∏ –æ—Ä–µ—Ö–∞–º–∏",
    "–ó–∞–ø–µ—á—ë–Ω–Ω–∞—è —Ä—ã–±–∞ —Å –±—Ä–æ–∫–∫–æ–ª–∏",
    "–û–≤–æ—â–Ω–æ–π —Å—É–ø-–ø—é—Ä–µ —Å —Ö–ª–µ–±—Ü–∞–º–∏"
]

def generate_mealplan_for_month(user_id, days=30):
    today = datetime.now()
    for i in range(days):
        date = (today + timedelta(days=i)).strftime("%Y-%m-%d")
        breakfast = random.choice(BREAKFASTS)
        lunch = random.choice(LUNCHES)
        dinner = random.choice(DINNERS)

        meals = (
            f"üç≥ –ó–∞–≤—Ç—Ä–∞–∫: {breakfast}\n"
            f"ü•ó –û–±–µ–¥: {lunch}\n"
            f"üç≤ –£–∂–∏–Ω: {dinner}"
        )

        save_mealplan(user_id, date, meals)
